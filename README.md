# WB-API

- [WB-API](#wb-api)
  - [О проекте](#о-проекте)
  - [Основные функции](#основные-функции)
  - [Стек технологий](#стек-технологий)
  - [Инструкция по запуску](#инструкция-по-запуску)
  - [Документация](#документация)
  - [Демонстрационная версия](#демонстрационная-версия)


## О проекте
Этот проект реализует API-сервис на FastAPI с интегрированным ботом на Aiogram. Сервис предназначен для работы с товарами Wildberries и включает следующие основные функции:

## Основные функции
**Эндпоинт для разового сбора данных**
- **POST** `/api/v1/products`
- Принимает JSON с параметром `artikul`. Например: ```{"artikul": 12345678}```
- По артикулу товара из Wildberries инициируется сбор данных и сохранение их в базу данных (PostgreSQL).

**Эндпоинт для периодического сбора данных**
- **GET** `/api/v1/subscribe/<артикул товара>`
- Запускает сбор данных по указанному артикулу каждые 30 минут. Для реализации использована библиотека APScheduler.
- Периодический сбор данных сохраняется между перезапусками сервиса.

**Телеграм-бот для получения информации о товаре**
- Бот запрашивает артикул у пользователя. После ввода артикула бот возвращает свежие данные о товаре из базы данных.

## Стек технологий
   - Python 3.12
   - FastAPI
   - Aiogram 3
   - SQLAlchemy
   - Pydantic 2
   - Docker, Docker Compose

## Инструкция по запуску

1. **Клонирование репозитория:**
   ```bash
   git clone https://github.com/snegirevdv/wb-api.git
   cd wb-api
   ```
2. **Настройка окружения:**
   Создайте файл .env на основе .env.example и укажите следующие параметры:
    - Данные для подключения к PostgreSQL
    - Токен Telegram-бота
    - Токен для авторизации (Bearer)
  
3. **Запуск проекта**
    ```bash
    docker-compose up --build
    ```

## Документация
После запуска проекта документация будет доступна по адресу http://<ваш сервер>/docs

## Демонстрационная версия
- Демонстрационная версия API: https://wb-api.snegirev.dev/api/v1/
- Документация: https://wb-api.snegirev.dev/docs/
- Телеграм-бот: @wildbtesting_bot